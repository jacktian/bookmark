angular.module("bookmark.controller",[]).controller("bookmarkController",["$scope","API","$timeout",function(e,o,r){e.openModal=function(){angular.element("#bookmarkModal").css("display","block"),angular.element("#bookmarkModal>.modal-body").removeClass("close"),angular.element("#bookmarkModal>.modal-body").addClass("open")},e.hideModal=function(){angular.element("#bookmarkModal>.modal-body").removeClass("open"),angular.element("#bookmarkModal>.modal-body").addClass("close"),r(function(){angular.element("#bookmarkModal").css("display","none")},200)},e.wallScroll=!1,e.scrollText="添加书签",e.showForm=function(){e.wallScroll=!e.wallScroll,"添加书签"==e.scrollText?e.scrollText="回到导航":e.scrollText="添加书签"},e.flip=!1,e.presentCategories=!1,e.newCategory={name:""};var a;e.showCategories=function(){r.cancel(a),e.presentCategories=!0},e.hideCategories=function(){a=r(function(){e.presentCategories=!1},200)},e.selectCategory=function(o){var r={};angular.copy(o,r),e.newCategory=r,angular.element("#newCategory").focus()},e.removeCategory=function(r){e.showCategories(),o.Category.remove({categoryId:r}).$promise.then(function(o){20==o.errorCode?angular.forEach(e.categories,function(o,a){o.id==r&&e.categories.splice(a,1)}):alert(o.errorMsg)}).catch(function(){alert("fail to delete category")})},e.flipToCategory=function(){e.flip=!0,e.newCategory={name:""}},e.addOrEditCategory=function(){e.newCategory.name?(e.newCategory.id>0?o.Category.update({categoryId:e.newCategory.id},{name:e.newCategory.name}).$promise.then(function(o){20==o.errorCode&&(angular.forEach(e.categories,function(o,r){o.id===e.newCategory.id&&o.name!==e.newCategory.name&&(o.name=e.newCategory.name)}),e.newCategory={name:""})}).catch(function(){alert("更新分类失败")}):o.Category.save({name:e.newCategory.name}).$promise.then(function(o){20==o.errorCode?(e.categories.push(o.data),e.newCategory={name:""}):alert(o.errorMsg)}).catch(function(){alert("更新分类失败")}),angular.element("#newCategory").focus()):(e.flip=!1,e.presentCategories=!1)},e.form={url:"",description:"",category:"",reset:function(){e.url="",e.description="",e.category=""},submit:function(r){o.Bookmark.save({url:e.url,description:e.description,category:e.category}).$promise.then(function(o){if(20==o.errorCode)return e.urls.unshift(o.data),e.reset(),o.data}.bind(e)).then(function(r){console.log(r);var a=r.id;o.Url.get({url:r.url,bookmarkId:a}).$promise.then(function(o){20==o.errorCode?angular.forEach(e.urls,function(r,t){r.id==a&&(e.urls[t].icon=o.data.icon,e.urls[t].title=o.data.title)}):alert(o.errorMsg)})}).catch(function(){alert("fail to add bookmark")})}},e.urls=[],o.Bookmark.get().$promise.then(function(o){20==o.errorCode&&(e.urls=o.data)}).catch(function(){alert("fail to get bookmark")}),e.categories=[],o.Category.get().$promise.then(function(o){20==o.errorCode&&(e.categories=o.data)}).catch(function(){alert("fail to get category")}),e.addCount=function(e){o.Bookmark.count({id:e})}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb2ttYXJrL2NvbnRyb2xsZXJzLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiQVBJIiwiJHRpbWVvdXQiLCJvcGVuTW9kYWwiLCJlbGVtZW50IiwiY3NzIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImhpZGVNb2RhbCIsIndhbGxTY3JvbGwiLCJzY3JvbGxUZXh0Iiwic2hvd0Zvcm0iLCJmbGlwIiwicHJlc2VudENhdGVnb3JpZXMiLCJuZXdDYXRlZ29yeSIsIm5hbWUiLCJ0aW1lciIsInNob3dDYXRlZ29yaWVzIiwiY2FuY2VsIiwiaGlkZUNhdGVnb3JpZXMiLCJzZWxlY3RDYXRlZ29yeSIsImNhdGVnb3J5IiwidG1wIiwiY29weSIsImZvY3VzIiwicmVtb3ZlQ2F0ZWdvcnkiLCJjSWQiLCJDYXRlZ29yeSIsInJlbW92ZSIsImNhdGVnb3J5SWQiLCIkcHJvbWlzZSIsInRoZW4iLCJkYXRhIiwiZXJyb3JDb2RlIiwiZm9yRWFjaCIsImNhdGVnb3JpZXMiLCJvIiwiaSIsImlkIiwic3BsaWNlIiwiYWxlcnQiLCJlcnJvck1zZyIsImNhdGNoIiwiZmxpcFRvQ2F0ZWdvcnkiLCJhZGRPckVkaXRDYXRlZ29yeSIsInVwZGF0ZSIsInNhdmUiLCJwdXNoIiwiZm9ybSIsInVybCIsImRlc2NyaXB0aW9uIiwicmVzZXQiLCJzdWJtaXQiLCJldmVudCIsIkJvb2ttYXJrIiwidXJscyIsInVuc2hpZnQiLCJiaW5kIiwiY29uc29sZSIsImxvZyIsImJvb2ttYXJrSWQiLCJVcmwiLCJnZXQiLCJpY29uIiwidGl0bGUiLCJhZGRDb3VudCIsImNvdW50Il0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBUUMsT0FBTywwQkFDZEMsV0FBVyxzQkFBc0IsU0FBUyxNQUFNLFdBQVcsU0FBU0MsRUFBT0MsRUFBSUMsR0FDL0VGLEVBQU9HLFVBQVUsV0FDaEJOLFFBQVFPLFFBQVEsa0JBQWtCQyxJQUFJLFVBQVUsU0FDaERSLFFB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LEdBQ3ZCLEdBQW1CLElBQWhCQSxFQUFLQyxVQUdQLE1BRkFqQyxHQUFPdUQsS0FBS0MsUUFBUXhCLEVBQUtBLE1BQ3pCaEMsRUFBT21ELFFBQ0FuQixFQUFLQSxNQUlaeUIsS0FBS3pELElBQ04rQixLQUFLLFNBQVNDLEdBQ2QwQixRQUFRQyxJQUFJM0IsRUFDWixJQUFJNEIsR0FBVzVCLEVBQUtNLEVBQ3BCckMsR0FBSTRELElBQUlDLEtBQUtiLElBQUlqQixFQUFLaUIsSUFBSVcsV0FBV0EsSUFDcEM5QixTQUFTQyxLQUFLLFNBQVNDLEdBQ0osSUFBaEJBLEVBQUtDLFVBQ1BwQyxRQUFRcUMsUUFBUWxDLEVBQU91RCxLQUFLLFNBQVNuQixFQUFFQyxHQUNuQ0QsRUFBRUUsSUFBSXNCLElBQ1I1RCxFQUFPdUQsS0FBS2xCLEdBQUcwQixLQUFLL0IsRUFBS0EsS0FBSytCLEtBQzlCL0QsRUFBT3VELEtBQUtsQixHQUFHMkIsTUFBTWhDLEVBQUtBLEtBQUtnQyxTQUlqQ3hCLE1BQU1SLEVBQUtTLGNBSWJDLE1BQU0sV0FDTkYsTUFBTSw0QkFLVHhDLEVBQU91RCxRQUNQdEQsRUFBSXFELFNBQVNRLE1BQ1poQyxTQUFTQyxLQUFLLFNBQVNDLEdBQ0osSUFBaEJBLEVBQUtDLFlBQ1BqQyxFQUFPdUQsS0FBS3ZCLEVBQUtBLFFBS2xCVSxNQUFNLFdBQ05GLE1BQU0sMEJBR1B4QyxFQUFPbUMsY0FDUGxDLEVBQUkwQixTQUFTbUMsTUFDWmhDLFNBQVNDLEtBQUssU0FBU0MsR0FDSixJQUFoQkEsRUFBS0MsWUFDUGpDLEVBQU9tQyxXQUFXSCxFQUFLQSxRQUt4QlUsTUFBTSxXQUNORixNQUFNLDBCQUdQeEMsRUFBT2lFLFNBQVMsU0FBU0wsR0FDeEIzRCxFQUFJcUQsU0FBU1ksT0FBTzVCLEdBQUdzQiIsImZpbGUiOiJib29rbWFyay9jb250cm9sbGVycy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnYm9va21hcmsuY29udHJvbGxlcicsW10pXHJcbi5jb250cm9sbGVyKCdib29rbWFya0NvbnRyb2xsZXInLFsnJHNjb3BlJywnQVBJJywnJHRpbWVvdXQnLGZ1bmN0aW9uKCRzY29wZSxBUEksJHRpbWVvdXQpe1xyXG5cdCRzY29wZS5vcGVuTW9kYWw9ZnVuY3Rpb24oKXtcclxuXHRcdGFuZ3VsYXIuZWxlbWVudChcIiNib29rbWFya01vZGFsXCIpLmNzcygnZGlzcGxheScsJ2Jsb2NrJyk7XHJcblx0XHRhbmd1bGFyLmVsZW1lbnQoXCIjYm9va21hcmtNb2RhbD4ubW9kYWwtYm9keVwiKS5yZW1vdmVDbGFzcygnY2xvc2UnKTtcclxuXHRcdGFuZ3VsYXIuZWxlbWVudChcIiNib29rbWFya01vZGFsPi5tb2RhbC1ib2R5XCIpLmFkZENsYXNzKCdvcGVuJyk7XHJcblx0fTtcclxuXHQkc2NvcGUuaGlkZU1vZGFsPWZ1bmN0aW9uKCl7XHJcblx0XHRhbmd1bGFyLmVsZW1lbnQoXCIjYm9va21hcmtNb2RhbD4ubW9kYWwtYm9keVwiKS5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG5cdFx0YW5ndWxhci5lbGVtZW50KFwiI2Jvb2ttYXJrTW9kYWw+Lm1vZGFsLWJvZHlcIikuYWRkQ2xhc3MoJ2Nsb3NlJyk7XHJcblx0XHQkdGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHRhbmd1bGFyLmVsZW1lbnQoXCIjYm9va21hcmtNb2RhbFwiKS5jc3MoJ2Rpc3BsYXknLCdub25lJyk7XHJcblx0XHR9LDIwMCk7XHJcblx0fTtcclxuXHJcblxyXG5cdCRzY29wZS53YWxsU2Nyb2xsPWZhbHNlO1xyXG5cdCRzY29wZS5zY3JvbGxUZXh0PVwi5re75Yqg5Lmm562+XCI7XHJcblx0JHNjb3BlLnNob3dGb3JtPWZ1bmN0aW9uKCl7XHJcblx0XHQkc2NvcGUud2FsbFNjcm9sbD0hJHNjb3BlLndhbGxTY3JvbGw7XHJcblx0XHRpZigkc2NvcGUuc2Nyb2xsVGV4dD09XCLmt7vliqDkuabnrb5cIil7XHJcblx0XHRcdCRzY29wZS5zY3JvbGxUZXh0PVwi5Zue5Yiw5a+86IiqXCI7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0JHNjb3BlLnNjcm9sbFRleHQ9XCLmt7vliqDkuabnrb5cIjtcclxuXHRcdH1cclxuXHR9O1xyXG5cdCRzY29wZS5mbGlwPWZhbHNlO1xyXG5cdC8vIOWIhuexu+S4i+aLiee8lui+keaOp+S7tlxyXG5cdCRzY29wZS5wcmVzZW50Q2F0ZWdvcmllcz1mYWxzZTtcclxuXHQkc2NvcGUubmV3Q2F0ZWdvcnk9e25hbWU6Jyd9O1xyXG5cdHZhciB0aW1lcjtcclxuXHQkc2NvcGUuc2hvd0NhdGVnb3JpZXM9ZnVuY3Rpb24oKXtcclxuXHRcdCR0aW1lb3V0LmNhbmNlbCh0aW1lcik7XHJcblx0XHQkc2NvcGUucHJlc2VudENhdGVnb3JpZXM9dHJ1ZTtcclxuXHR9O1xyXG5cdCRzY29wZS5oaWRlQ2F0ZWdvcmllcz1mdW5jdGlvbigpe1xyXG5cdFx0dGltZXI9JHRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0JHNjb3BlLnByZXNlbnRDYXRlZ29yaWVzPWZhbHNlO1xyXG5cdFx0fSwyMDApO1xyXG5cdH07XHJcblx0JHNjb3BlLnNlbGVjdENhdGVnb3J5PWZ1bmN0aW9uKGNhdGVnb3J5KXtcclxuXHRcdHZhciB0bXA9e307XHJcblx0XHRhbmd1bGFyLmNvcHkoY2F0ZWdvcnksdG1wKTtcclxuXHRcdCRzY29wZS5uZXdDYXRlZ29yeT10bXA7XHJcblx0XHRhbmd1bGFyLmVsZW1lbnQoXCIjbmV3Q2F0ZWdvcnlcIikuZm9jdXMoKTtcclxuXHR9O1xyXG5cdCRzY29wZS5yZW1vdmVDYXRlZ29yeT1mdW5jdGlvbihjSWQpe1xyXG5cdFx0JHNjb3BlLnNob3dDYXRlZ29yaWVzKCk7XHJcblx0XHRBUEkuQ2F0ZWdvcnkucmVtb3ZlKHtjYXRlZ29yeUlkOmNJZH0pXHJcblx0XHQuJHByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0aWYoZGF0YS5lcnJvckNvZGU9PTIwKXtcclxuXHRcdFx0XHRhbmd1bGFyLmZvckVhY2goJHNjb3BlLmNhdGVnb3JpZXMsZnVuY3Rpb24obyxpKXtcclxuXHRcdFx0XHRcdGlmKG8uaWQ9PWNJZCl7XHJcblx0XHRcdFx0XHRcdCRzY29wZS5jYXRlZ29yaWVzLnNwbGljZShpLDEpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRhbGVydChkYXRhLmVycm9yTXNnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdC5jYXRjaChmdW5jdGlvbigpe1xyXG5cdFx0XHRhbGVydCgnZmFpbCB0byBkZWxldGUgY2F0ZWdvcnknKTtcclxuXHRcdH0pO1xyXG5cdH07XHJcblx0JHNjb3BlLmZsaXBUb0NhdGVnb3J5PWZ1bmN0aW9uKCl7XHJcblx0XHQkc2NvcGUuZmxpcD10cnVlO1xyXG5cdFx0JHNjb3BlLm5ld0NhdGVnb3J5PXtuYW1lOicnfTtcclxuXHR9O1xyXG5cdCRzY29wZS5hZGRPckVkaXRDYXRlZ29yeT1mdW5jdGlvbigpe1xyXG5cdFx0aWYoJHNjb3BlLm5ld0NhdGVnb3J5Lm5hbWUpe1xyXG5cdFx0XHRpZigkc2NvcGUubmV3Q2F0ZWdvcnkuaWQ+MCl7Ly/nvJbovpHliIbnsbtcclxuXHRcdFx0XHRBUEkuQ2F0ZWdvcnkudXBkYXRlKHtjYXRlZ29yeUlkOiRzY29wZS5uZXdDYXRlZ29yeS5pZH0se25hbWU6JHNjb3BlLm5ld0NhdGVnb3J5Lm5hbWV9KVxyXG5cdFx0XHRcdC4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRcdFx0aWYoZGF0YS5lcnJvckNvZGU9PTIwKXtcclxuXHRcdFx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKCRzY29wZS5jYXRlZ29yaWVzLGZ1bmN0aW9uKG8saSl7XHJcblx0XHRcdFx0XHRcdFx0aWYoby5pZD09PSRzY29wZS5uZXdDYXRlZ29yeS5pZCAmJiBvLm5hbWUhPT0kc2NvcGUubmV3Q2F0ZWdvcnkubmFtZSl7XHJcblx0XHRcdFx0XHRcdFx0XHRvLm5hbWU9JHNjb3BlLm5ld0NhdGVnb3J5Lm5hbWU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0JHNjb3BlLm5ld0NhdGVnb3J5PXtuYW1lOicnfTtcclxuXHRcdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0XHQvLyBhbGVydChkYXRhLmVycm9yTXNnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0YWxlcnQoJ+abtOaWsOWIhuexu+Wksei0pScpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRBUEkuQ2F0ZWdvcnkuc2F2ZSh7bmFtZTokc2NvcGUubmV3Q2F0ZWdvcnkubmFtZX0pXHJcblx0XHRcdFx0LiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0XHRpZihkYXRhLmVycm9yQ29kZT09MjApe1xyXG5cdFx0XHRcdFx0XHQkc2NvcGUuY2F0ZWdvcmllcy5wdXNoKGRhdGEuZGF0YSk7XHJcblx0XHRcdFx0XHRcdCRzY29wZS5uZXdDYXRlZ29yeT17bmFtZTonJ307XHJcblx0XHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdFx0YWxlcnQoZGF0YS5lcnJvck1zZyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdGFsZXJ0KCfmm7TmlrDliIbnsbvlpLHotKUnKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRhbmd1bGFyLmVsZW1lbnQoXCIjbmV3Q2F0ZWdvcnlcIikuZm9jdXMoKTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHQkc2NvcGUuZmxpcD1mYWxzZTtcclxuXHRcdFx0JHNjb3BlLnByZXNlbnRDYXRlZ29yaWVzPWZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0XHJcblxyXG5cdH07XHJcblxyXG5cdCRzY29wZS5mb3JtPXtcclxuXHRcdHVybDpcIlwiLFxyXG5cdFx0ZGVzY3JpcHRpb246XCJcIixcclxuXHRcdGNhdGVnb3J5OlwiXCIsXHJcblx0XHRyZXNldDpmdW5jdGlvbigpe1xyXG5cdFx0XHQkc2NvcGUudXJsPVwiXCI7XHJcblx0XHRcdCRzY29wZS5kZXNjcmlwdGlvbj1cIlwiO1xyXG5cdFx0XHQkc2NvcGUuY2F0ZWdvcnk9XCJcIjtcclxuXHRcdH0sXHJcblx0XHRzdWJtaXQ6ZnVuY3Rpb24oZXZlbnQpe1xyXG5cdFx0XHRBUEkuQm9va21hcmsuc2F2ZSh7dXJsOiRzY29wZS51cmwsZGVzY3JpcHRpb246JHNjb3BlLmRlc2NyaXB0aW9uLGNhdGVnb3J5OiRzY29wZS5jYXRlZ29yeX0pXHJcblx0XHRcdC4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRcdGlmKGRhdGEuZXJyb3JDb2RlPT0yMCl7XHJcblx0XHRcdFx0XHQkc2NvcGUudXJscy51bnNoaWZ0KGRhdGEuZGF0YSk7XHJcblx0XHRcdFx0XHQkc2NvcGUucmVzZXQoKTtcclxuXHRcdFx0XHRcdHJldHVybiBkYXRhLmRhdGE7XHJcblx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHQvLyBhbGVydChkYXRhLmVycm9yTXNnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0uYmluZCgkc2NvcGUpKVxyXG5cdFx0XHQudGhlbihmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhkYXRhKTtcclxuXHRcdFx0XHR2YXIgYm9va21hcmtJZD1kYXRhLmlkO1xyXG5cdFx0XHRcdEFQSS5VcmwuZ2V0KHt1cmw6ZGF0YS51cmwsYm9va21hcmtJZDpib29rbWFya0lkfSlcclxuXHRcdFx0XHQuJHByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRcdGlmKGRhdGEuZXJyb3JDb2RlPT0yMCl7XHJcblx0XHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUudXJscyxmdW5jdGlvbihvLGkpe1xyXG5cdFx0XHRcdFx0XHRcdGlmKG8uaWQ9PWJvb2ttYXJrSWQpe1xyXG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLnVybHNbaV0uaWNvbj1kYXRhLmRhdGEuaWNvbjtcclxuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS51cmxzW2ldLnRpdGxlPWRhdGEuZGF0YS50aXRsZTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRcdGFsZXJ0KGRhdGEuZXJyb3JNc2cpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRhbGVydCgnZmFpbCB0byBhZGQgYm9va21hcmsnKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHQvLyDojrflj5bmiYDmnInkuabnrb5cclxuXHQkc2NvcGUudXJscz1bXTtcclxuXHRBUEkuQm9va21hcmsuZ2V0KClcclxuXHQuJHByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKXtcclxuXHRcdGlmKGRhdGEuZXJyb3JDb2RlPT0yMCl7XHJcblx0XHRcdCRzY29wZS51cmxzPWRhdGEuZGF0YTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHQvLyBhbGVydChkYXRhLmVycm9yTXNnKTtcclxuXHRcdH1cclxuXHR9KVxyXG5cdC5jYXRjaChmdW5jdGlvbigpe1xyXG5cdFx0YWxlcnQoJ2ZhaWwgdG8gZ2V0IGJvb2ttYXJrJyk7XHJcblx0fSk7XHJcblx0Ly8g6I635Y+W5YiG57G7XHJcblx0JHNjb3BlLmNhdGVnb3JpZXM9W107XHJcblx0QVBJLkNhdGVnb3J5LmdldCgpXHJcblx0LiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRpZihkYXRhLmVycm9yQ29kZT09MjApe1xyXG5cdFx0XHQkc2NvcGUuY2F0ZWdvcmllcz1kYXRhLmRhdGE7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0Ly8gYWxlcnQoZGF0YS5lcnJvck1zZyk7XHJcblx0XHR9XHJcblx0fSlcclxuXHQuY2F0Y2goZnVuY3Rpb24oKXtcclxuXHRcdGFsZXJ0KCdmYWlsIHRvIGdldCBjYXRlZ29yeScpO1xyXG5cdH0pO1xyXG5cdC8vIOWinuWKoOS5puetvueCueWHu+aVsFxyXG5cdCRzY29wZS5hZGRDb3VudD1mdW5jdGlvbihib29rbWFya0lkKXtcclxuXHRcdEFQSS5Cb29rbWFyay5jb3VudCh7aWQ6Ym9va21hcmtJZH0pO1xyXG5cdH07XHJcbn1dKTsiXX0=
