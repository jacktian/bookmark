angular.module("bookmark.controller",[]).controller("bookmarkController",["$scope","API","$timeout",function(e,r,o){e.wallScroll=!1,e.scrollText="添加书签",e.showForm=function(){e.wallScroll=!e.wallScroll,"添加书签"==e.scrollText?e.scrollText="回到导航":e.scrollText="添加书签"},e.flip=!1,e.presentCategories=!1,e.newCategory={name:""};var t;e.showCategories=function(){o.cancel(t),e.presentCategories=!0},e.hideCategories=function(){t=o(function(){e.presentCategories=!1},200)},e.selectCategory=function(r){var o={};angular.copy(r,o),e.newCategory=o,angular.element("#newCategory").focus()},e.removeCategory=function(o){e.showCategories(),r.Category.remove({categoryId:o}).$promise.then(function(r){20==r.errorCode?angular.forEach(e.categories,function(r,t){r.id==o&&e.categories.splice(t,1)}):alert(r.errorMsg)}).catch(function(){alert("fail to delete category")})},e.flipToCategory=function(){e.flip=!0,e.newCategory={name:""}},e.addOrEditCategory=function(){e.newCategory.name?(e.newCategory.id>0?r.Category.update({categoryId:e.newCategory.id},{name:e.newCategory.name}).$promise.then(function(r){20==r.errorCode?(angular.forEach(e.categories,function(r,o){r.id===e.newCategory.id&&r.name!==e.newCategory.name&&(r.name=e.newCategory.name)}),e.newCategory={name:""}):alert(r.errorMsg)}).catch(function(){alert("更新分类失败")}):r.Category.save({name:e.newCategory.name}).$promise.then(function(r){20==r.errorCode?(e.categories.push(r.data),e.newCategory={name:""}):alert(r.errorMsg)}).catch(function(){alert("更新分类失败")}),angular.element("#newCategory").focus()):(e.flip=!1,e.presentCategories=!1)},e.form={url:"",description:"",category:"",reset:function(){this.url="",this.description="",this.category=""},submit:function(o){r.Bookmark.save({url:this.url,description:this.description,category:this.category}).$promise.then(function(r){return 20==r.errorCode?(e.urls.unshift(r.data),this.reset(),r.data):void alert(r.errorMsg)}.bind(this)).then(function(o){console.log(o);var t=o.id;r.Url.get({url:o.url,bookmarkId:t}).$promise.then(function(r){20==r.errorCode?angular.forEach(e.urls,function(o,a){o.id==t&&(e.urls[a].icon=r.data.icon,e.urls[a].title=r.data.title)}):alert(r.errorMsg)})}).catch(function(){alert("fail to add bookmark")})}},e.urls=[],r.Bookmark.get().$promise.then(function(r){20==r.errorCode?e.urls=r.data:alert(r.errorMsg)}).catch(function(){alert("fail to get bookmark")}),e.categories=[],r.Category.get().$promise.then(function(r){20==r.errorCode?e.categories=r.data:alert(r.errorMsg)}).catch(function(){alert("fail to get category")}),e.addCount=function(e){r.Bookmark.count({id:e})}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb2ttYXJrL2NvbnRyb2xsZXJzLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiQVBJIiwiJHRpbWVvdXQiLCJ3YWxsU2Nyb2xsIiwic2Nyb2xsVGV4dCIsInNob3dGb3JtIiwiZmxpcCIsInByZXNlbnRDYXRlZ29yaWVzIiwibmV3Q2F0ZWdvcnkiLCJuYW1lIiwidGltZXIiLCJzaG93Q2F0ZWdvcmllcyIsImNhbmNlbCIsImhpZGVDYXRlZ29yaWVzIiwic2VsZWN0Q2F0ZWdvcnkiLCJjYXRlZ29yeSIsInRtcCIsImNvcHkiLCJlbGVtZW50IiwiZm9jdXMiLCJyZW1vdmVDYXRlZ29yeSIsImNJZCIsIkNhdGVnb3J5IiwicmVtb3ZlIiwiY2F0ZWdvcnlJZCIsIiRwcm9taXNlIiwidGhlbiIsImRhdGEiLCJlcnJvckNvZGUiLCJmb3JFYWNoIiwiY2F0ZWdvcmllcyIsIm8iLCJpIiwiaWQiLCJzcGxpY2UiLCJhbGVydCIsImVycm9yTXNnIiwiY2F0Y2giLCJmbGlwVG9DYXRlZ29yeSIsImFkZE9yRWRpdENhdGVnb3J5IiwidXBkYXRlIiwic2F2ZSIsInB1c2giLCJmb3JtIiwidXJsIiwiZGVzY3JpcHRpb24iLCJyZXNldCIsInRoaXMiLCJzdWJtaXQiLCJldmVudCIsIkJvb2ttYXJrIiwidXJscyIsInVuc2hpZnQiLCJiaW5kIiwiY29uc29sZSIsImxvZyIsImJvb2ttYXJrSWQiLCJVcmwiLCJnZXQiLCJpY29uIiwidGl0bGUiLCJhZGRDb3VudCIsImNvdW50Il0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBUUMsT0FBTywwQkFDZEMsV0FBVyxzQkFBc0IsU0FBUyxNQUFNLFdBQVcsU0FBU0MsRUFBT0MsRUFBSUMsR0FDL0VGLEVBQU9HLFlBQVcsRUFDbEJILEVBQU9JLFdBQVcsT0FDbEJKLEVBQU9LLFNBQVMsV0FDZkwsRUFBT0csWUFBWUgsRUFBT0csV0FDSixRQUFuQkgsRUFBT0ksV0FDVEosRUFBT0ksV0FB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N0IsRUFBT21ELEtBQUssU0FBU3BCLEVBQUVDLEdBQ25DRCxFQUFFRSxJQUFJdUIsSUFDUnhELEVBQU9tRCxLQUFLbkIsR0FBRzJCLEtBQUtoQyxFQUFLQSxLQUFLZ0MsS0FDOUIzRCxFQUFPbUQsS0FBS25CLEdBQUc0QixNQUFNakMsRUFBS0EsS0FBS2lDLFNBSWpDekIsTUFBTVIsRUFBS1MsY0FJYkMsTUFBTSxXQUNORixNQUFNLDRCQUtUbkMsRUFBT21ELFFBQ1BsRCxFQUFJaUQsU0FBU1EsTUFDWmpDLFNBQVNDLEtBQUssU0FBU0MsR0FDSixJQUFoQkEsRUFBS0MsVUFDUDVCLEVBQU9tRCxLQUFLeEIsRUFBS0EsS0FFakJRLE1BQU1SLEVBQUtTLFlBR1pDLE1BQU0sV0FDTkYsTUFBTSwwQkFHUG5DLEVBQU84QixjQUNQN0IsRUFBSXFCLFNBQVNvQyxNQUNaakMsU0FBU0MsS0FBSyxTQUFTQyxHQUNKLElBQWhCQSxFQUFLQyxVQUNQNUIsRUFBTzhCLFdBQVdILEVBQUtBLEtBRXZCUSxNQUFNUixFQUFLUyxZQUdaQyxNQUFNLFdBQ05GLE1BQU0sMEJBR1BuQyxFQUFPNkQsU0FBUyxTQUFTTCxHQUN4QnZELEVBQUlpRCxTQUFTWSxPQUFPN0IsR0FBR3VCIiwiZmlsZSI6ImJvb2ttYXJrL2NvbnRyb2xsZXJzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdib29rbWFyay5jb250cm9sbGVyJyxbXSlcclxuLmNvbnRyb2xsZXIoJ2Jvb2ttYXJrQ29udHJvbGxlcicsWyckc2NvcGUnLCdBUEknLCckdGltZW91dCcsZnVuY3Rpb24oJHNjb3BlLEFQSSwkdGltZW91dCl7XHJcblx0JHNjb3BlLndhbGxTY3JvbGw9ZmFsc2U7XHJcblx0JHNjb3BlLnNjcm9sbFRleHQ9XCLmt7vliqDkuabnrb5cIjtcclxuXHQkc2NvcGUuc2hvd0Zvcm09ZnVuY3Rpb24oKXtcclxuXHRcdCRzY29wZS53YWxsU2Nyb2xsPSEkc2NvcGUud2FsbFNjcm9sbDtcclxuXHRcdGlmKCRzY29wZS5zY3JvbGxUZXh0PT1cIua3u+WKoOS5puetvlwiKXtcclxuXHRcdFx0JHNjb3BlLnNjcm9sbFRleHQ9XCLlm57liLDlr7zoiKpcIjtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHQkc2NvcGUuc2Nyb2xsVGV4dD1cIua3u+WKoOS5puetvlwiO1xyXG5cdFx0fVxyXG5cdH07XHJcblx0JHNjb3BlLmZsaXA9ZmFsc2U7XHJcblx0Ly8g5YiG57G75LiL5ouJ57yW6L6R5o6n5Lu2XHJcblx0JHNjb3BlLnByZXNlbnRDYXRlZ29yaWVzPWZhbHNlO1xyXG5cdCRzY29wZS5uZXdDYXRlZ29yeT17bmFtZTonJ307XHJcblx0dmFyIHRpbWVyO1xyXG5cdCRzY29wZS5zaG93Q2F0ZWdvcmllcz1mdW5jdGlvbigpe1xyXG5cdFx0JHRpbWVvdXQuY2FuY2VsKHRpbWVyKTtcclxuXHRcdCRzY29wZS5wcmVzZW50Q2F0ZWdvcmllcz10cnVlO1xyXG5cdH07XHJcblx0JHNjb3BlLmhpZGVDYXRlZ29yaWVzPWZ1bmN0aW9uKCl7XHJcblx0XHR0aW1lcj0kdGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHQkc2NvcGUucHJlc2VudENhdGVnb3JpZXM9ZmFsc2U7XHJcblx0XHR9LDIwMCk7XHJcblx0fTtcclxuXHQkc2NvcGUuc2VsZWN0Q2F0ZWdvcnk9ZnVuY3Rpb24oY2F0ZWdvcnkpe1xyXG5cdFx0dmFyIHRtcD17fTtcclxuXHRcdGFuZ3VsYXIuY29weShjYXRlZ29yeSx0bXApO1xyXG5cdFx0JHNjb3BlLm5ld0NhdGVnb3J5PXRtcDtcclxuXHRcdGFuZ3VsYXIuZWxlbWVudChcIiNuZXdDYXRlZ29yeVwiKS5mb2N1cygpO1xyXG5cdH07XHJcblx0JHNjb3BlLnJlbW92ZUNhdGVnb3J5PWZ1bmN0aW9uKGNJZCl7XHJcblx0XHQkc2NvcGUuc2hvd0NhdGVnb3JpZXMoKTtcclxuXHRcdEFQSS5DYXRlZ29yeS5yZW1vdmUoe2NhdGVnb3J5SWQ6Y0lkfSlcclxuXHRcdC4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRpZihkYXRhLmVycm9yQ29kZT09MjApe1xyXG5cdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuY2F0ZWdvcmllcyxmdW5jdGlvbihvLGkpe1xyXG5cdFx0XHRcdFx0aWYoby5pZD09Y0lkKXtcclxuXHRcdFx0XHRcdFx0JHNjb3BlLmNhdGVnb3JpZXMuc3BsaWNlKGksMSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdGFsZXJ0KGRhdGEuZXJyb3JNc2cpO1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKGZ1bmN0aW9uKCl7XHJcblx0XHRcdGFsZXJ0KCdmYWlsIHRvIGRlbGV0ZSBjYXRlZ29yeScpO1xyXG5cdFx0fSk7XHJcblx0fTtcclxuXHQkc2NvcGUuZmxpcFRvQ2F0ZWdvcnk9ZnVuY3Rpb24oKXtcclxuXHRcdCRzY29wZS5mbGlwPXRydWU7XHJcblx0XHQkc2NvcGUubmV3Q2F0ZWdvcnk9e25hbWU6Jyd9O1xyXG5cdH07XHJcblx0JHNjb3BlLmFkZE9yRWRpdENhdGVnb3J5PWZ1bmN0aW9uKCl7XHJcblx0XHRpZigkc2NvcGUubmV3Q2F0ZWdvcnkubmFtZSl7XHJcblx0XHRcdGlmKCRzY29wZS5uZXdDYXRlZ29yeS5pZD4wKXsvL+e8lui+keWIhuexu1xyXG5cdFx0XHRcdEFQSS5DYXRlZ29yeS51cGRhdGUoe2NhdGVnb3J5SWQ6JHNjb3BlLm5ld0NhdGVnb3J5LmlkfSx7bmFtZTokc2NvcGUubmV3Q2F0ZWdvcnkubmFtZX0pXHJcblx0XHRcdFx0LiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0XHRpZihkYXRhLmVycm9yQ29kZT09MjApe1xyXG5cdFx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2goJHNjb3BlLmNhdGVnb3JpZXMsZnVuY3Rpb24obyxpKXtcclxuXHRcdFx0XHRcdFx0XHRpZihvLmlkPT09JHNjb3BlLm5ld0NhdGVnb3J5LmlkICYmIG8ubmFtZSE9PSRzY29wZS5uZXdDYXRlZ29yeS5uYW1lKXtcclxuXHRcdFx0XHRcdFx0XHRcdG8ubmFtZT0kc2NvcGUubmV3Q2F0ZWdvcnkubmFtZTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHQkc2NvcGUubmV3Q2F0ZWdvcnk9e25hbWU6Jyd9O1xyXG5cdFx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRcdGFsZXJ0KGRhdGEuZXJyb3JNc2cpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRhbGVydCgn5pu05paw5YiG57G75aSx6LSlJyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdEFQSS5DYXRlZ29yeS5zYXZlKHtuYW1lOiRzY29wZS5uZXdDYXRlZ29yeS5uYW1lfSlcclxuXHRcdFx0XHQuJHByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRcdGlmKGRhdGEuZXJyb3JDb2RlPT0yMCl7XHJcblx0XHRcdFx0XHRcdCRzY29wZS5jYXRlZ29yaWVzLnB1c2goZGF0YS5kYXRhKTtcclxuXHRcdFx0XHRcdFx0JHNjb3BlLm5ld0NhdGVnb3J5PXtuYW1lOicnfTtcclxuXHRcdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0XHRhbGVydChkYXRhLmVycm9yTXNnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0YWxlcnQoJ+abtOaWsOWIhuexu+Wksei0pScpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGFuZ3VsYXIuZWxlbWVudChcIiNuZXdDYXRlZ29yeVwiKS5mb2N1cygpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdCRzY29wZS5mbGlwPWZhbHNlO1xyXG5cdFx0XHQkc2NvcGUucHJlc2VudENhdGVnb3JpZXM9ZmFsc2U7XHJcblx0XHR9XHJcblx0XHRcclxuXHJcblx0fTtcclxuXHJcblx0JHNjb3BlLmZvcm09e1xyXG5cdFx0dXJsOlwiXCIsXHJcblx0XHRkZXNjcmlwdGlvbjpcIlwiLFxyXG5cdFx0Y2F0ZWdvcnk6XCJcIixcclxuXHRcdHJlc2V0OmZ1bmN0aW9uKCl7XHJcblx0XHRcdHRoaXMudXJsPVwiXCI7XHJcblx0XHRcdHRoaXMuZGVzY3JpcHRpb249XCJcIjtcclxuXHRcdFx0dGhpcy5jYXRlZ29yeT1cIlwiO1xyXG5cdFx0fSxcclxuXHRcdHN1Ym1pdDpmdW5jdGlvbihldmVudCl7XHJcblx0XHRcdEFQSS5Cb29rbWFyay5zYXZlKHt1cmw6dGhpcy51cmwsZGVzY3JpcHRpb246dGhpcy5kZXNjcmlwdGlvbixjYXRlZ29yeTp0aGlzLmNhdGVnb3J5fSlcclxuXHRcdFx0LiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0aWYoZGF0YS5lcnJvckNvZGU9PTIwKXtcclxuXHRcdFx0XHRcdCRzY29wZS51cmxzLnVuc2hpZnQoZGF0YS5kYXRhKTtcclxuXHRcdFx0XHRcdHRoaXMucmVzZXQoKTtcclxuXHRcdFx0XHRcdHJldHVybiBkYXRhLmRhdGE7XHJcblx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRhbGVydChkYXRhLmVycm9yTXNnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0uYmluZCh0aGlzKSlcclxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZGF0YSk7XHJcblx0XHRcdFx0dmFyIGJvb2ttYXJrSWQ9ZGF0YS5pZDtcclxuXHRcdFx0XHRBUEkuVXJsLmdldCh7dXJsOmRhdGEudXJsLGJvb2ttYXJrSWQ6Ym9va21hcmtJZH0pXHJcblx0XHRcdFx0LiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0XHRpZihkYXRhLmVycm9yQ29kZT09MjApe1xyXG5cdFx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2goJHNjb3BlLnVybHMsZnVuY3Rpb24obyxpKXtcclxuXHRcdFx0XHRcdFx0XHRpZihvLmlkPT1ib29rbWFya0lkKXtcclxuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS51cmxzW2ldLmljb249ZGF0YS5kYXRhLmljb247XHJcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUudXJsc1tpXS50aXRsZT1kYXRhLmRhdGEudGl0bGU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0XHRhbGVydChkYXRhLmVycm9yTXNnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0YWxlcnQoJ2ZhaWwgdG8gYWRkIGJvb2ttYXJrJyk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH07XHJcblx0Ly8g6I635Y+W5omA5pyJ5Lmm562+XHJcblx0JHNjb3BlLnVybHM9W107XHJcblx0QVBJLkJvb2ttYXJrLmdldCgpXHJcblx0LiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRpZihkYXRhLmVycm9yQ29kZT09MjApe1xyXG5cdFx0XHQkc2NvcGUudXJscz1kYXRhLmRhdGE7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0YWxlcnQoZGF0YS5lcnJvck1zZyk7XHJcblx0XHR9XHJcblx0fSlcclxuXHQuY2F0Y2goZnVuY3Rpb24oKXtcclxuXHRcdGFsZXJ0KCdmYWlsIHRvIGdldCBib29rbWFyaycpO1xyXG5cdH0pO1xyXG5cdC8vIOiOt+WPluWIhuexu1xyXG5cdCRzY29wZS5jYXRlZ29yaWVzPVtdO1xyXG5cdEFQSS5DYXRlZ29yeS5nZXQoKVxyXG5cdC4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0aWYoZGF0YS5lcnJvckNvZGU9PTIwKXtcclxuXHRcdFx0JHNjb3BlLmNhdGVnb3JpZXM9ZGF0YS5kYXRhO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdGFsZXJ0KGRhdGEuZXJyb3JNc2cpO1xyXG5cdFx0fVxyXG5cdH0pXHJcblx0LmNhdGNoKGZ1bmN0aW9uKCl7XHJcblx0XHRhbGVydCgnZmFpbCB0byBnZXQgY2F0ZWdvcnknKTtcclxuXHR9KTtcclxuXHQvLyDlop7liqDkuabnrb7ngrnlh7vmlbBcclxuXHQkc2NvcGUuYWRkQ291bnQ9ZnVuY3Rpb24oYm9va21hcmtJZCl7XHJcblx0XHRBUEkuQm9va21hcmsuY291bnQoe2lkOmJvb2ttYXJrSWR9KTtcclxuXHR9O1xyXG59XSk7Il19
