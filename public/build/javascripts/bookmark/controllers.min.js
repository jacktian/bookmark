angular.module("bookmark.controller",[]).controller("bookmarkController",["$scope","API","$timeout",function(e,o,r){e.wallScroll=!1,e.scrollText="添加书签",e.showForm=function(){e.wallScroll=!e.wallScroll,"添加书签"==e.scrollText?e.scrollText="回到导航":e.scrollText="添加书签"},e.flip=!1,e.presentCategories=!1,e.newCategory={name:""};var t;e.showCategories=function(){r.cancel(t),e.presentCategories=!0},e.hideCategories=function(){t=r(function(){e.presentCategories=!1},200)},e.selectCategory=function(o){var r={};angular.copy(o,r),e.newCategory=r,angular.element("#newCategory").focus()},e.removeCategory=function(r){e.showCategories(),o.Category.remove({categoryId:r}).$promise.then(function(o){20==o.errorCode?angular.forEach(e.categories,function(o,t){o.id==r&&e.categories.splice(t,1)}):alert(o.errorMsg)}).catch(function(){alert("fail to delete category")})},e.flipToCategory=function(){e.flip=!0,e.newCategory={name:""}},e.addOrEditCategory=function(){e.newCategory.name?(e.newCategory.id>0?o.Category.update({categoryId:e.newCategory.id},{name:e.newCategory.name}).$promise.then(function(o){20==o.errorCode&&(angular.forEach(e.categories,function(o,r){o.id===e.newCategory.id&&o.name!==e.newCategory.name&&(o.name=e.newCategory.name)}),e.newCategory={name:""})}).catch(function(){alert("更新分类失败")}):o.Category.save({name:e.newCategory.name}).$promise.then(function(o){20==o.errorCode?(e.categories.push(o.data),e.newCategory={name:""}):alert(o.errorMsg)}).catch(function(){alert("更新分类失败")}),angular.element("#newCategory").focus()):(e.flip=!1,e.presentCategories=!1)},e.form={url:"",description:"",category:"",reset:function(){this.url="",this.description="",this.category=""},submit:function(r){o.Bookmark.save({url:this.url,description:this.description,category:this.category}).$promise.then(function(o){if(20==o.errorCode)return e.urls.unshift(o.data),this.reset(),o.data}.bind(this)).then(function(r){console.log(r);var t=r.id;o.Url.get({url:r.url,bookmarkId:t}).$promise.then(function(o){20==o.errorCode?angular.forEach(e.urls,function(r,a){r.id==t&&(e.urls[a].icon=o.data.icon,e.urls[a].title=o.data.title)}):alert(o.errorMsg)})}).catch(function(){alert("fail to add bookmark")})}},e.urls=[],o.Bookmark.get().$promise.then(function(o){20==o.errorCode&&(e.urls=o.data)}).catch(function(){alert("fail to get bookmark")}),e.categories=[],o.Category.get().$promise.then(function(o){20==o.errorCode&&(e.categories=o.data)}).catch(function(){alert("fail to get category")}),e.addCount=function(e){o.Bookmark.count({id:e})}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb2ttYXJrL2NvbnRyb2xsZXJzLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiQVBJIiwiJHRpbWVvdXQiLCJ3YWxsU2Nyb2xsIiwic2Nyb2xsVGV4dCIsInNob3dGb3JtIiwiZmxpcCIsInByZXNlbnRDYXRlZ29yaWVzIiwibmV3Q2F0ZWdvcnkiLCJuYW1lIiwidGltZXIiLCJzaG93Q2F0ZWdvcmllcyIsImNhbmNlbCIsImhpZGVDYXRlZ29yaWVzIiwic2VsZWN0Q2F0ZWdvcnkiLCJjYXRlZ29yeSIsInRtcCIsImNvcHkiLCJlbGVtZW50IiwiZm9jdXMiLCJyZW1vdmVDYXRlZ29yeSIsImNJZCIsIkNhdGVnb3J5IiwicmVtb3ZlIiwiY2F0ZWdvcnlJZCIsIiRwcm9taXNlIiwidGhlbiIsImRhdGEiLCJlcnJvckNvZGUiLCJmb3JFYWNoIiwiY2F0ZWdvcmllcyIsIm8iLCJpIiwiaWQiLCJzcGxpY2UiLCJhbGVydCIsImVycm9yTXNnIiwiY2F0Y2giLCJmbGlwVG9DYXRlZ29yeSIsImFkZE9yRWRpdENhdGVnb3J5IiwidXBkYXRlIiwic2F2ZSIsInB1c2giLCJmb3JtIiwidXJsIiwiZGVzY3JpcHRpb24iLCJyZXNldCIsInRoaXMiLCJzdWJtaXQiLCJldmVudCIsIkJvb2ttYXJrIiwidXJscyIsInVuc2hpZnQiLCJiaW5kIiwiY29uc29sZSIsImxvZyIsImJvb2ttYXJrSWQiLCJVcmwiLCJnZXQiLCJpY29uIiwidGl0bGUiLCJhZGRDb3VudCIsImNvdW50Il0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBUUMsT0FBTywwQkFDZEMsV0FBVyxzQkFBc0IsU0FBUyxNQUFNLFdBQVcsU0FBU0MsRUFBT0MsRUFBSUMsR0FDL0VGLEVBQU9HLFlBQVcsRUFDbEJILEVBQU9JLFdBQVcsT0FDbEJKLEVBQU9LLFNBQVMsV0FDZkwsRUFBT0csWUFBWUgsRUFBT0csV0FDSixRQUFuQkgsRUFBT0ksV0FDVEosRUFBT0ksV0FB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bkNELEVBQUVFLElBQUl1QixJQUNSeEQsRUFBT21ELEtBQUtuQixHQUFHMkIsS0FBS2hDLEVBQUtBLEtBQUtnQyxLQUM5QjNELEVBQU9tRCxLQUFLbkIsR0FBRzRCLE1BQU1qQyxFQUFLQSxLQUFLaUMsU0FJakN6QixNQUFNUixFQUFLUyxjQUliQyxNQUFNLFdBQ05GLE1BQU0sNEJBS1RuQyxFQUFPbUQsUUFDUGxELEVBQUlpRCxTQUFTUSxNQUNaakMsU0FBU0MsS0FBSyxTQUFTQyxHQUNKLElBQWhCQSxFQUFLQyxZQUNQNUIsRUFBT21ELEtBQUt4QixFQUFLQSxRQUtsQlUsTUFBTSxXQUNORixNQUFNLDBCQUdQbkMsRUFBTzhCLGNBQ1A3QixFQUFJcUIsU0FBU29DLE1BQ1pqQyxTQUFTQyxLQUFLLFNBQVNDLEdBQ0osSUFBaEJBLEVBQUtDLFlBQ1A1QixFQUFPOEIsV0FBV0gsRUFBS0EsUUFLeEJVLE1BQU0sV0FDTkYsTUFBTSwwQkFHUG5DLEVBQU82RCxTQUFTLFNBQVNMLEdBQ3hCdkQsRUFBSWlELFNBQVNZLE9BQU83QixHQUFHdUIiLCJmaWxlIjoiYm9va21hcmsvY29udHJvbGxlcnMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ2Jvb2ttYXJrLmNvbnRyb2xsZXInLFtdKVxyXG4uY29udHJvbGxlcignYm9va21hcmtDb250cm9sbGVyJyxbJyRzY29wZScsJ0FQSScsJyR0aW1lb3V0JyxmdW5jdGlvbigkc2NvcGUsQVBJLCR0aW1lb3V0KXtcclxuXHQkc2NvcGUud2FsbFNjcm9sbD1mYWxzZTtcclxuXHQkc2NvcGUuc2Nyb2xsVGV4dD1cIua3u+WKoOS5puetvlwiO1xyXG5cdCRzY29wZS5zaG93Rm9ybT1mdW5jdGlvbigpe1xyXG5cdFx0JHNjb3BlLndhbGxTY3JvbGw9ISRzY29wZS53YWxsU2Nyb2xsO1xyXG5cdFx0aWYoJHNjb3BlLnNjcm9sbFRleHQ9PVwi5re75Yqg5Lmm562+XCIpe1xyXG5cdFx0XHQkc2NvcGUuc2Nyb2xsVGV4dD1cIuWbnuWIsOWvvOiIqlwiO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdCRzY29wZS5zY3JvbGxUZXh0PVwi5re75Yqg5Lmm562+XCI7XHJcblx0XHR9XHJcblx0fTtcclxuXHQkc2NvcGUuZmxpcD1mYWxzZTtcclxuXHQvLyDliIbnsbvkuIvmi4nnvJbovpHmjqfku7ZcclxuXHQkc2NvcGUucHJlc2VudENhdGVnb3JpZXM9ZmFsc2U7XHJcblx0JHNjb3BlLm5ld0NhdGVnb3J5PXtuYW1lOicnfTtcclxuXHR2YXIgdGltZXI7XHJcblx0JHNjb3BlLnNob3dDYXRlZ29yaWVzPWZ1bmN0aW9uKCl7XHJcblx0XHQkdGltZW91dC5jYW5jZWwodGltZXIpO1xyXG5cdFx0JHNjb3BlLnByZXNlbnRDYXRlZ29yaWVzPXRydWU7XHJcblx0fTtcclxuXHQkc2NvcGUuaGlkZUNhdGVnb3JpZXM9ZnVuY3Rpb24oKXtcclxuXHRcdHRpbWVyPSR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRcdCRzY29wZS5wcmVzZW50Q2F0ZWdvcmllcz1mYWxzZTtcclxuXHRcdH0sMjAwKTtcclxuXHR9O1xyXG5cdCRzY29wZS5zZWxlY3RDYXRlZ29yeT1mdW5jdGlvbihjYXRlZ29yeSl7XHJcblx0XHR2YXIgdG1wPXt9O1xyXG5cdFx0YW5ndWxhci5jb3B5KGNhdGVnb3J5LHRtcCk7XHJcblx0XHQkc2NvcGUubmV3Q2F0ZWdvcnk9dG1wO1xyXG5cdFx0YW5ndWxhci5lbGVtZW50KFwiI25ld0NhdGVnb3J5XCIpLmZvY3VzKCk7XHJcblx0fTtcclxuXHQkc2NvcGUucmVtb3ZlQ2F0ZWdvcnk9ZnVuY3Rpb24oY0lkKXtcclxuXHRcdCRzY29wZS5zaG93Q2F0ZWdvcmllcygpO1xyXG5cdFx0QVBJLkNhdGVnb3J5LnJlbW92ZSh7Y2F0ZWdvcnlJZDpjSWR9KVxyXG5cdFx0LiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdGlmKGRhdGEuZXJyb3JDb2RlPT0yMCl7XHJcblx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKCRzY29wZS5jYXRlZ29yaWVzLGZ1bmN0aW9uKG8saSl7XHJcblx0XHRcdFx0XHRpZihvLmlkPT1jSWQpe1xyXG5cdFx0XHRcdFx0XHQkc2NvcGUuY2F0ZWdvcmllcy5zcGxpY2UoaSwxKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0YWxlcnQoZGF0YS5lcnJvck1zZyk7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goZnVuY3Rpb24oKXtcclxuXHRcdFx0YWxlcnQoJ2ZhaWwgdG8gZGVsZXRlIGNhdGVnb3J5Jyk7XHJcblx0XHR9KTtcclxuXHR9O1xyXG5cdCRzY29wZS5mbGlwVG9DYXRlZ29yeT1mdW5jdGlvbigpe1xyXG5cdFx0JHNjb3BlLmZsaXA9dHJ1ZTtcclxuXHRcdCRzY29wZS5uZXdDYXRlZ29yeT17bmFtZTonJ307XHJcblx0fTtcclxuXHQkc2NvcGUuYWRkT3JFZGl0Q2F0ZWdvcnk9ZnVuY3Rpb24oKXtcclxuXHRcdGlmKCRzY29wZS5uZXdDYXRlZ29yeS5uYW1lKXtcclxuXHRcdFx0aWYoJHNjb3BlLm5ld0NhdGVnb3J5LmlkPjApey8v57yW6L6R5YiG57G7XHJcblx0XHRcdFx0QVBJLkNhdGVnb3J5LnVwZGF0ZSh7Y2F0ZWdvcnlJZDokc2NvcGUubmV3Q2F0ZWdvcnkuaWR9LHtuYW1lOiRzY29wZS5uZXdDYXRlZ29yeS5uYW1lfSlcclxuXHRcdFx0XHQuJHByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRcdGlmKGRhdGEuZXJyb3JDb2RlPT0yMCl7XHJcblx0XHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuY2F0ZWdvcmllcyxmdW5jdGlvbihvLGkpe1xyXG5cdFx0XHRcdFx0XHRcdGlmKG8uaWQ9PT0kc2NvcGUubmV3Q2F0ZWdvcnkuaWQgJiYgby5uYW1lIT09JHNjb3BlLm5ld0NhdGVnb3J5Lm5hbWUpe1xyXG5cdFx0XHRcdFx0XHRcdFx0by5uYW1lPSRzY29wZS5uZXdDYXRlZ29yeS5uYW1lO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdCRzY29wZS5uZXdDYXRlZ29yeT17bmFtZTonJ307XHJcblx0XHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdFx0Ly8gYWxlcnQoZGF0YS5lcnJvck1zZyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdGFsZXJ0KCfmm7TmlrDliIbnsbvlpLHotKUnKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0QVBJLkNhdGVnb3J5LnNhdmUoe25hbWU6JHNjb3BlLm5ld0NhdGVnb3J5Lm5hbWV9KVxyXG5cdFx0XHRcdC4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRcdFx0aWYoZGF0YS5lcnJvckNvZGU9PTIwKXtcclxuXHRcdFx0XHRcdFx0JHNjb3BlLmNhdGVnb3JpZXMucHVzaChkYXRhLmRhdGEpO1xyXG5cdFx0XHRcdFx0XHQkc2NvcGUubmV3Q2F0ZWdvcnk9e25hbWU6Jyd9O1xyXG5cdFx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRcdGFsZXJ0KGRhdGEuZXJyb3JNc2cpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRhbGVydCgn5pu05paw5YiG57G75aSx6LSlJyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0YW5ndWxhci5lbGVtZW50KFwiI25ld0NhdGVnb3J5XCIpLmZvY3VzKCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0JHNjb3BlLmZsaXA9ZmFsc2U7XHJcblx0XHRcdCRzY29wZS5wcmVzZW50Q2F0ZWdvcmllcz1mYWxzZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cclxuXHR9O1xyXG5cclxuXHQkc2NvcGUuZm9ybT17XHJcblx0XHR1cmw6XCJcIixcclxuXHRcdGRlc2NyaXB0aW9uOlwiXCIsXHJcblx0XHRjYXRlZ29yeTpcIlwiLFxyXG5cdFx0cmVzZXQ6ZnVuY3Rpb24oKXtcclxuXHRcdFx0dGhpcy51cmw9XCJcIjtcclxuXHRcdFx0dGhpcy5kZXNjcmlwdGlvbj1cIlwiO1xyXG5cdFx0XHR0aGlzLmNhdGVnb3J5PVwiXCI7XHJcblx0XHR9LFxyXG5cdFx0c3VibWl0OmZ1bmN0aW9uKGV2ZW50KXtcclxuXHRcdFx0QVBJLkJvb2ttYXJrLnNhdmUoe3VybDp0aGlzLnVybCxkZXNjcmlwdGlvbjp0aGlzLmRlc2NyaXB0aW9uLGNhdGVnb3J5OnRoaXMuY2F0ZWdvcnl9KVxyXG5cdFx0XHQuJHByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRpZihkYXRhLmVycm9yQ29kZT09MjApe1xyXG5cdFx0XHRcdFx0JHNjb3BlLnVybHMudW5zaGlmdChkYXRhLmRhdGEpO1xyXG5cdFx0XHRcdFx0dGhpcy5yZXNldCgpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGRhdGEuZGF0YTtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdC8vIGFsZXJ0KGRhdGEuZXJyb3JNc2cpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fS5iaW5kKHRoaXMpKVxyXG5cdFx0XHQudGhlbihmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhkYXRhKTtcclxuXHRcdFx0XHR2YXIgYm9va21hcmtJZD1kYXRhLmlkO1xyXG5cdFx0XHRcdEFQSS5VcmwuZ2V0KHt1cmw6ZGF0YS51cmwsYm9va21hcmtJZDpib29rbWFya0lkfSlcclxuXHRcdFx0XHQuJHByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRcdGlmKGRhdGEuZXJyb3JDb2RlPT0yMCl7XHJcblx0XHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUudXJscyxmdW5jdGlvbihvLGkpe1xyXG5cdFx0XHRcdFx0XHRcdGlmKG8uaWQ9PWJvb2ttYXJrSWQpe1xyXG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLnVybHNbaV0uaWNvbj1kYXRhLmRhdGEuaWNvbjtcclxuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS51cmxzW2ldLnRpdGxlPWRhdGEuZGF0YS50aXRsZTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRcdGFsZXJ0KGRhdGEuZXJyb3JNc2cpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRhbGVydCgnZmFpbCB0byBhZGQgYm9va21hcmsnKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHQvLyDojrflj5bmiYDmnInkuabnrb5cclxuXHQkc2NvcGUudXJscz1bXTtcclxuXHRBUEkuQm9va21hcmsuZ2V0KClcclxuXHQuJHByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKXtcclxuXHRcdGlmKGRhdGEuZXJyb3JDb2RlPT0yMCl7XHJcblx0XHRcdCRzY29wZS51cmxzPWRhdGEuZGF0YTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHQvLyBhbGVydChkYXRhLmVycm9yTXNnKTtcclxuXHRcdH1cclxuXHR9KVxyXG5cdC5jYXRjaChmdW5jdGlvbigpe1xyXG5cdFx0YWxlcnQoJ2ZhaWwgdG8gZ2V0IGJvb2ttYXJrJyk7XHJcblx0fSk7XHJcblx0Ly8g6I635Y+W5YiG57G7XHJcblx0JHNjb3BlLmNhdGVnb3JpZXM9W107XHJcblx0QVBJLkNhdGVnb3J5LmdldCgpXHJcblx0LiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRpZihkYXRhLmVycm9yQ29kZT09MjApe1xyXG5cdFx0XHQkc2NvcGUuY2F0ZWdvcmllcz1kYXRhLmRhdGE7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0Ly8gYWxlcnQoZGF0YS5lcnJvck1zZyk7XHJcblx0XHR9XHJcblx0fSlcclxuXHQuY2F0Y2goZnVuY3Rpb24oKXtcclxuXHRcdGFsZXJ0KCdmYWlsIHRvIGdldCBjYXRlZ29yeScpO1xyXG5cdH0pO1xyXG5cdC8vIOWinuWKoOS5puetvueCueWHu+aVsFxyXG5cdCRzY29wZS5hZGRDb3VudD1mdW5jdGlvbihib29rbWFya0lkKXtcclxuXHRcdEFQSS5Cb29rbWFyay5jb3VudCh7aWQ6Ym9va21hcmtJZH0pO1xyXG5cdH07XHJcbn1dKTsiXX0=
